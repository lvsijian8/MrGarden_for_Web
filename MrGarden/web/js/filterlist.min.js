/*! ========================================================================
 * FilterList: filterlist.js v2.0.0
 * ========================================================================
 * Copyright 2015, Salvatore Di Salvo (disalvo-infographiste[dot]be)
 * ======================================================================== */
(function(d){var c=function(f,e){this.$element=d(f);this.options=d.extend({},this.defaults(),e);this.structure=d.extend({},this.parts())};c.VERSION="1.0.0";c.DEFAULTS={method:"recursive",items:".items"};c.prototype.defaults=function(){return{select:c.DEFAULTS.select,method:this.$element.attr("data-method")||c.DEFAULTS.method,items:this.$element.attr("data-items")||c.DEFAULTS.items}};c.prototype.parts=function(){return{$items:d(this.options.items,this.$element)}};c.prototype.filter=function(h,e,i){alert(h+" - "+e+" - "+i);var g=this.$element;if(i&&g.data("bs.dropdownselect")){var f=d(".items.selected",g);if(f.length){f.each(function(){if(d(this).data(h)!=i){g.bootstrapSelect("clear")}})}}this.filterItem(h,e,i,this.options.method);if(d(".live-filtering",g).data("liveFilter")){d(".live-filtering",g).liveFilter("initAC")}};c.prototype.filterItem=function(f,e,g,h){this.structure.$items.each(function(){var k=d(this).data("ref"),j=d(this).data("valid");if(k!=undefined&&j!=undefined){k=k.split(",");j=j.split(",");if(k.length==j.length){if(g!=null){if(k.indexOf(f)>-1){j[k.indexOf(f)]=g}else{k=k.concat([f]);j=j.concat([g])}}else{k.splice(k.indexOf(f),1);j.splice(k.indexOf(f),1)}}}else{if(g!=null){k=[f];j=[g]}}if(h=="recursive"){var i=true;for(var l=0;l<k.length;l++){if(j[l]!=d(this).data(k[l])){i=false}}}else{if(h=="additionnal"){var i=false;for(var l=0;l<k.length;l++){if(j[l]==d(this).data(k[l])){i=true}}}}d(this).data("ref",k.toString()).data("valid",j.toString());if(!i){d(this).addClass("disabled").hide()}else{d(this).removeClass("disabled").show()}})};function b(){var e=arguments;return this.each(function(){var g=d(this);var f=g.data("filterSelect");var h=e[0];if((typeof(h)=="object"||!h)&&!f){g.data("filterSelect",(f=new c(this,h)));h=f}else{if(f[h]){h=f[h];e=Array.prototype.slice.call(e,1);h(e)}else{d.error("Method "+h+" does not exist on jQuery.pluginName");return this}}return h.call(this,e)})}var a=d.fn.selectFilter;d.fn.selectFilter=b;d.fn.selectFilter.Constructor=c;d.fn.toggle.noConflict=function(){d.fn.selectFilter=a;return this};d(function(){d("[data-filter]").selectFilter()})}(jQuery));